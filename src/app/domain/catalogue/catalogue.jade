section.busy(ng-if="!vm.ready" layout="row" layout-align="center center")
  md-progress-circular(md-diameter="200" md-mode="indeterminate")

md-content.articles(ng-if="vm.ready" layout="row" layout-align="center")

  md-sidenav.md-sidenav-right.md-whiteframe-1dp(
  layout-padding md-component-id="right-nav" md-is-locked-open="$mdMedia('gt-xs')"
  )
    p.md-title Фильтры

    property-filter.custom-padding(
    property-name='frameSize'
    property-label='Размер'
    options='vm.frameSizes'
    current-option='vm.currentFilter.frameSize'
    set-option-fn='vm.filterOptionClick',
    clear-fn='vm.delCurrFilter'
    )

    property-filter.custom-padding(
    property-name='brand'
    property-label='Брэнд'
    options='vm.brands'
    current-option='vm.currentFilter.brand'
    set-option-fn='vm.filterOptionClick',
    clear-fn='vm.delCurrFilter'
    )

    property-filter.custom-padding(
    property-name='material'
    property-label='Материал'
    options='vm.materials'
    current-option='vm.currentFilter.material'
    set-option-fn='vm.filterOptionClick',
    clear-fn='vm.delCurrFilter'
    )

    property-filter.custom-padding(
    property-name='colour'
    property-label='Цвет'
    options='vm.colours'
    current-option='vm.currentFilter.colour'
    set-option-fn='vm.filterOptionClick',
    clear-fn='vm.delCurrFilter'
    )

    md-button.md-raised.custom-button(
    aria-label='Reset filters' ng-click="vm.resetFilters()" ng-if="vm.filterLength"
    ) Сбросить фильтры

    md-divider(flex)
    div(style='height: 300px; overflow: scroll;' ng-if)
      .md-whiteframe-1dp.items(ng-repeat='frame in vm.articles | limitTo:20')
        | {{frame.name}}


    md-button.pink-button(style='padding: 0' ng-click="vm.goToCreateFrame()") Добавить рамку



  .ui-view(flex ng-if='!vm.isRootState')

  md-content#scroll-main(
  flex
  style='height: {{ windowHeight - (windowWidth >= 960 ? 64 : 56) }}px; max-width: {{ vm.isRootState ? "100%" : "0"}}'
  )
    md-virtual-repeat-container(style='height: {{windowHeight - 65}}px')
      .repeated-group(md-virtual-repeat='row in vm.rows' layout='row' layout-align='center center')
        .repeated-group-item(ng-repeat='article in row' flex)
          md-card(layout='column' layout-align='center center')
            md-card-header
              a(href ui-sref='.item({id: article.id})')
                img.image-thumbnail(ng-src='{{article.images[0].thumbnailSrc}}' ng-if='article.images.length')
                img.image-thumbnail( src='http://bit.ly/1Yu4VIb' ng-if='!article.images.length')

            md-card-title.md-margin
              md-card-title-text
                .md-subhead.center {{ article.name }}

            .md-margin
              .md-title.center {{ article.lowPrice + ' руб.'}}
            span(flex)

            md-card-content.fixed-height(ng-if='article.inCart')
              .div-order-info(layout='row' layout-align="start center")

                p.name-style Заказано:

                div(layout='row' layout-align='center center')
                  md-button.icon-button-catalogue(ng-click='vm.minusOne(article)') -

                  md-input-container
                    input.custom-input(
                    aria-label="Количество"
                    ng-model="article.inCart.count"
                    type="number"
                    ng-change="vm.onCartChange(article)"
                    ng-blur="vm.onBlur(article)"
                    ng-pattern="vm.pattern"
                    required
                    min='0'
                    step='1'
                    )

                  md-button.icon-button-catalogue(ng-click='vm.plusOne(article)') +

            md-card-actions(ng-if='!article.inCart' flex)
              md-card-icon-actions
                md-button.md-fab.md-mini.md-icon-button(
                aria-label="Добавить в корзину"
                ng-click="vm.addToCart(article)"
                )
                  i.material-icons add_shopping_cart
