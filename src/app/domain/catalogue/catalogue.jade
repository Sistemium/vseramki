section.busy(ng-if="!vm.ready" layout="row" layout-align="center center")
  md-progress-circular(md-diameter="200" md-mode="indeterminate")

md-content.articles(ng-if="vm.ready" layout="row" layout-align="center" )

  md-sidenav#sidenav-left.md-sidenav-left.md-whiteframe-1dp.margin-top-bottom(
  layout-padding md-component-id="left-nav" md-is-locked-open="$mdMedia('gt-xs')"
  )
    div(layout='row' layout-align='center center' ng-if='vm.isRootState')
      i.material-icons.icon-button(
      ng-click="vm.changeView('catalogue.table')"
      ng-class="vm.currentState == 'table' ? 'icons-button-active' : 'icon-button-disabled'"
      ) view_headline

      .vertical-divider |

      i.material-icons.icon-button(
      ng-click="vm.changeView('catalogue.tiles')"
      ng-class="vm.currentState == 'tiles' ? 'icons-button-active' : 'icon-button-disabled'"
      ) view_comfy

    p.md-title

      span.no-button(ng-if='!vm.filterLength') Фильтр

      md-button.md-raised.no-margin(
      aria-label='Reset filters' ng-click='vm.resetFilters()' ng-if='vm.filterLength'
      ) Сбросить фильтры

    .no-padding(layout='column' layout-align='start start')

      property-filter(
      property-name='frameSize'
      property-label='Размер'
      options='vm.frameSizes'
      current-option='vm.currentFilter.frameSize'
      set-option-fn='vm.filterOptionClick',
      clear-fn='vm.delCurrFilter'
      )

      property-filter(
      property-name='brand'
      property-label='Бренд'
      options='vm.brands'
      current-option='vm.currentFilter.brand'
      set-option-fn='vm.filterOptionClick',
      clear-fn='vm.delCurrFilter'
      )

      property-filter(
      property-name='material'
      property-label='Материал'
      options='vm.materials'
      current-option='vm.currentFilter.material'
      set-option-fn='vm.filterOptionClick',
      clear-fn='vm.delCurrFilter'
      )

      property-filter(
      property-name='colour'
      property-label='Цвет'
      options='vm.colours'
      current-option='vm.currentFilter.colour'
      set-option-fn='vm.filterOptionClick',
      clear-fn='vm.delCurrFilter'
      )

    md-divider(ng-hide='vm.isRootState' style='margin-top: 8px')

    .no-padding.article-list(
    layout='column'
    resize='articlesList'
    style='height: {{articlesList.windowHeight - articlesList.offsetTop - 20}}px'
    )
      md-virtual-repeat-container(flex ng-if='!vm.isRootState')
        .md-whiteframe-1dp.item(
        md-virtual-repeat='frame in vm.articles'
        ng-class="{'active' : vm.currentItemId == frame.id }"
        ng-click='vm.changeFrame(frame)'
        )
          span {{frame.name}}

      .no-margin(flex ng-show='vm.isRootState')

      md-button.admin-button.no-padding(
      ng-click="vm.goToCreateFrame()"
      ng-if='vm.isAdmin && vm.isRootState'
      ) Добавить рамку

  .ui-view.md-whiteframe-1dp.margin-top-bottom(
  flex
  resize='ui'
  style='height: {{ui.windowHeight - ui.offsetTop}}px'
  )
<<<<<<< HEAD
=======
    md-virtual-repeat-container(style='height: {{ frames.windowHeight - frames.offsetTop }}px;')
      .repeated-group(md-virtual-repeat='row in vm.rows' layout='row' layout-align='center center')
        .repeated-group-item(ng-repeat='article in row' flex)
          md-card.text-center(layout='column' layout-align='space-between center')
            .md-card-corner
              label арт. {{ article.code }}

            md-card-header
              a(href ui-sref='catalogue.item({id: article.id})')
                img.thumbnail(ng-src='{{article.activePhoto()}}')
            md-card-title.md-margin
              md-card-title-text {{ article.name }}

            .md-margin
              .md-title.text-center.text-nowrap
                span(ng-class='{"strike-through gray": vm.cartHasDiscount}') {{ article.highPrice }} ₽
                span(ng-if='vm.cartHasDiscount') &nbsp; {{ article.discountedPrice(vm.cartSubTotal) }} ₽

            md-card-actions(flex ng-if='article.inCart')
              .div-order-info.space-children-em(layout='row' layout-align="start center")

                p Заказано:

                .plus-minus(layout='row' layout-align='center center')
                  md-button.micro-fab(ng-click='vm.minusOne(article)') -

                  md-input-container
                    input(
                    aria-label="Количество"
                    ng-model="article.inCart.count"
                    type="number"
                    ng-change="vm.onCartChange(article)"
                    ng-blur="vm.onBlur(article)"
                    ng-pattern="vm.pattern"
                    required
                    min='0'
                    step='1'
                    )

                  md-button.micro-fab(ng-click='vm.plusOne(article)') +

            md-card-actions(flex ng-if='!article.inCart')
              md-button.md-fab.md-mini.md-icon-button(
              aria-label="Добавить в корзину"
              ng-click="vm.addToCart(article)"
              )
                i.material-icons add_shopping_cart
>>>>>>> vr2

