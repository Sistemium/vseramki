md-content.md-padding

  section.busy(ng-if='!vm.ready' layout='row' layout-align='center center')
    md-progress-circular(md-diameter='200' md-mode='indeterminate')

  // Dropdown lists
  .md-whiteframe-1dp.radius(layout='row', layout-align='center center' ng-if='vm.ready')

    md-menu(md-offset='0 80')
      md-button.md-raised.pink-button(aria-label='Группировка' ng-click='$mdOpenMenu($event)' )
        label Группировка
        span(ng-if='vm.groups') :
        = ' '
        span {{ vm.groups.label }}
      md-menu-content(width='2')
        md-menu-item(ng-repeat='prop in vm.props track by prop.label')
          md-button(ng-click='vm.setFilterCriterias(prop, $event, $index)' id='groups')
            span(md-menu-align-target id='groups')
              | {{ prop.label }}

    md-menu(md-offset='0 60')
      md-button.md-raised.pink-button(aria-label='Строки' ng-click='$mdOpenMenu($event)')
        label Строки
        span(ng-if='vm.rows') :
        = ' '
        span {{ vm.rows.label }}
      md-menu-content(width='2')
        md-menu-item(ng-repeat='prop in vm.props track by prop.label')
          md-button(ng-click='vm.setFilterCriterias(prop, $event, $index)' id='rows')
            span(md-menu-align-target id='rows')
              | {{ prop.label }}

    md-menu(md-offset='0 60')
      md-button.md-raised.pink-button(aria-label='Столбцы' ng-click='$mdOpenMenu($event)')
        label Столбцы
        span(ng-if='vm.columns') :
        = ' '
        span {{ vm.columns.label }}
      md-menu-content(width='2')
        md-menu-item(ng-repeat='prop in vm.props track by prop.label')
          md-button(ng-click='vm.setFilterCriterias(prop, $event, $index)' id='columns')
            span(md-menu-align-target id='columns')
              | {{ prop.label }}

  section(ng-repeat='group in vm.groups.data track by group.id')
    h4 {{ group}}
    md-table-container
      table(border="1")
        thead
          th {{ vm.rows.label }}
          th(ng-repeat='column in vm.columnsByGroup(group) track by column.id') {{ column.name }}
        tbody
          tr(ng-repeat='row in vm.rowsByGroup(group) track by row.id')
            td {{ ::row.name }}
            td(ng-repeat='column in vm.columnsByGroup(group) track by column.id')
              | {{ ::vm.cellByGroupRowColumn (group, row, column) }}
